\documentclass[12pt,a4paper]{article}
\usepackage[left=2.5cm,right=2.5cm,top=2.5cm,bottom=2.5cm]{geometry}
\usepackage[utf8]{inputenc}
\usepackage{amssymb, amsmath, amsthm}
\usepackage{graphics, graphicx}
\usepackage{hyperref}
\pagestyle{empty}
\hypersetup{
  colorlinks   = true, %Colours links instead of ugly boxes
  urlcolor     = blue, %Colour for external hyperlinks
}

\begin{document}
\textbf{Chapter 4 solutions  \hfill Hanna GÃ¡bor}

\begin{enumerate}
  \item
    \textit{In Example 4.1, if $\pi$ is the equiprobable random policy, what is $q_\pi(11, down)$?
    What is $q_\pi(7, down)$?}

    \begin{align*}
    q_\pi(11, \text{down}) &= 0\\
    q_\pi(7, \text{down}) &= -1 + v_\pi(11) = -15\\
    \end{align*}

  \item
    \textit{2 In Example 4.1, suppose a new state 15 is added to the gridworld just below
    state 13, and its actions, left, up, right, and down, take the agent to states 12, 13, 14,
    and 15, respectively. Assume that the transitions from the original states are unchanged.
    What, then, is $v_\pi(15)$ for the equiprobable random policy? Now suppose the dynamics of
    state 13 are also changed, such that action down from state 13 takes the agent to the new
    state 15. What is $v_\pi(15)$ for the equiprobable random policy in this case?}

    In the first case
    \begin{align*}
      v_\pi(15) &= -1 + (v_\pi(12) + v_\pi(13) + v_\pi(14) + v_\pi(15))/4\\
      &=-1 + (- 22 - 20 - 14 + v_\pi(15))/4 = -15 + v_\pi(15)/4
    \end{align*}
    From this $v_\pi(15) = 4 \cdot (-15) /3 = - 20.0$

    $v_\pi(15) = - 20.0$ in the second case as well, because we changed a state
    transition to a another state transition, where the two states have the same value.

  \item
    \textit{What are the equations analogous to (4.3), (4.4), and (4.5), but for action-value
    functions instead of state-value functions?}

    \begin{align*}
      q_\pi(s, a) &= \mathbb{E}(R_{t + 1} + \gamma v_\pi (S_{t + 1})|S_t = s, A_t = a )\\
      &= \sum\limits_{r, s'} p(s', r | s, a) \Big(r + \sum\limits_{a'} \pi(a'|s') q_\pi(s', a')\Big)\\
      q_{k + 1}(s, a) &\doteq \sum\limits_{r, s'} p(s', r | s, a) \Big(r + \sum\limits_{a'} \pi(a'|s') q_k(s', a')\Big)
    \end{align*}



\end{enumerate}
\end{document}
